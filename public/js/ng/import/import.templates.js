(function(){'use strict';angular.module('app.import').run(['$templateCache', function($templateCache) {$templateCache.put('partials/import/import.component.html','<div class="page-header">\n    <h3 translate>Import layers, reports and dashboards</h3>\n</div>\n\n<h4 translate>Step 1 - Choose file to import</h4>\n<div class="btn btn-default" ngf-select="vm.upload($file)" translate>Select file...</div>\n\n<div ng-if="vm.checkingFile">\n    <i class="fa fa-spinner fa-fw fa-spin"></i>\n    <span translate>Checking file</span>\n\n    <uib-progressbar value="vm.checkProgressValue" max="vm.checkProgressMax"></uib-progressbar>\n</div>\n\n<p ng-if="vm.checkError" class="text-danger">\n    <span translate>Error:</span>\n    <span>{{ vm.checkError.message }}</span>\n</p>\n\n<div ng-if="vm.step >= 2">\n    <h4 translate>Step 2 - Confirm import</h4>\n\n    <form ng-if="vm.importBundle" name="vm.form" ng-submit="vm.doImport()" novalidate>\n        <details ng-open="!vm.importStarted">\n            <summary translate>Data sources</summary>\n\n            <div class="form-group" ng-repeat="ds in vm.importBundle.datasources" ng-class="{ \'has-error\': vm.form[\'datasource-\' + ds.doc._id].$invalid }">\n                <label class="control-label" translate>Datasource matching {{ds.doc.name}}</label>\n                <select class="form-control" name="datasource-{{ ds.doc._id }}" ng-model="vm.datasourceMatch[ds.doc._id]" ng-options="ds as ds.name for ds in vm.localDatasources track by ds._id" required>\n                    <option value=""></option>\n                </select>\n                <span class="help-block" ng-if="vm.form[\'datasource-\' + ds.doc._id].$error.required" translate>This field is required</span>\n            </div>\n        </details>\n\n        <details ng-open="!vm.importStarted">\n            <summary translate>Layers</summary>\n\n            <div class="table-responsive">\n                <table class="table table-condensed">\n                    <thead>\n                        <tr>\n                            <th translate>Name</th>\n                            <th translate>Status</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="layer in vm.importBundle.layers" ng-class="{ warning: !layer.valid }">\n                            <td>{{ layer.doc.name }}</td>\n                            <td>\n                                <div ng-if="!layer.valid">\n                                    <div class="text-warning" ng-repeat="error in layer.errors">{{ error }}</div>\n                                </div>\n                                <div ng-if="layer.valid">\n                                    <div ng-if="layer.exists">\n                                        <span class="text-info" translate>Already exists. Overwrite ?</span>\n                                        <input type="checkbox" ng-model="layer.overwrite">\n                                    </div>\n                                    <div ng-if="!layer.exists">\n                                        <span class="text-success" translate>OK</span>\n                                    </div>\n                                </div>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </details>\n\n        <details ng-open="!vm.importStarted">\n            <summary translate>Reports</summary>\n\n            <div class="table-responsive">\n                <table class="table table-condensed">\n                    <thead>\n                        <tr>\n                            <th translate>Name</th>\n                            <th translate>Status</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="report in vm.importBundle.reports" ng-class="{ warning: !report.valid }">\n                            <td>{{ report.doc.reportName }}</td>\n                            <td>\n                                <div ng-if="!report.valid">\n                                    <div class="text-warning" ng-repeat="error in errors">{{ error }}</div>\n                                </div>\n                                <div ng-if="report.valid">\n                                    <div ng-if="report.exists">\n                                        <span class="text-info" translate>Already exists. Overwrite ?</span>\n                                        <input type="checkbox" ng-model="report.overwrite">\n                                    </div>\n                                    <div ng-if="!report.exists">\n                                        <span class="text-success" translate>OK</span>\n                                    </div>\n                                </div>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </details>\n\n        <details ng-open="!vm.importStarted">\n            <summary translate>Dashboards</summary>\n\n            <div class="table-responsive">\n                <table class="table table-condensed">\n                    <thead>\n                        <tr>\n                            <th translate>Name</th>\n                            <th translate>Status</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="dashboard in vm.importBundle.dashboards" ng-class="{ warning: !dashboard.valid }">\n                            <td>{{ dashboard.doc.dashboardName }}</td>\n                            <td>\n                                <div ng-if="!dashboard.valid">\n                                    <div class="text-warning" ng-repeat="error in dashboard.errors">{{ error }}</div>\n                                </div>\n                                <div ng-if="dashboard.valid">\n                                    <div ng-if="dashboard.exists">\n                                        <span class="text-info" translate>Already exists. Overwrite ?</span>\n                                        <input type="checkbox" ng-model="dashboard.overwrite">\n                                    </div>\n                                    <div ng-if="!dashboard.exists">\n                                        <span class="text-success" translate>OK</span>\n                                    </div>\n                                </div>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </details>\n\n        <div class="form-group">\n            <button type="submit" class="btn btn-primary" ng-disabled="vm.importStarted" translate>Start import</button>\n        </div>\n    </form>\n</div>\n\n<div ng-if="vm.step >= 3">\n    <h4 translate>Step 3 - Import</h4>\n\n    <uib-progressbar value="vm.importProgressValue" max="vm.importProgressMax"></uib-progressbar>\n\n    <div class="well" style="height: 300px; overflow-y: auto;">\n        <div ng-class="\'text-\' + message.type" ng-repeat="message in vm.messages track by $index">{{ message.text }}</div>\n    </div>\n</div>\n');}]);})();